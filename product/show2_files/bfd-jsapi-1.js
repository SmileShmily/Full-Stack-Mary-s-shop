(function(l){function x(C){this.request_name=C}x.prototype.combineStr=function(F,D){var C=new Array();for(var E=0;E<F.length;++E){C.push(encodeURIComponent(F[E]))}if(D===undefined||D===null){D="|"}return C.join(D)};x.prototype.getQueryString=function(F,D){if(F===undefined||F===null){F="="}if(D===undefined||D===null){D="&"}var C=new Array();for(var E in this){if(typeof this[E]!="function"&&E!="request_name"){C.push((new Array(E,F,encodeURIComponent(this[E].toString()))).join(""))}}return C.join(D)};x.prototype.getRequestName=function(){return this.request_name};function j(D,E,C){x.call(this,"addItem");this.item_id=D;this.item_name=E;this.item_link=C}j.prototype=new x();j.prototype.getQueryString=function(F,D){if(F===undefined||F===null){F="="}if(D===undefined||D===null){D="&"}var C=new Array();for(var E in this){if(typeof this[E]!="function"&&E!="request_name"){if(E==="category"&&this[E].length>0){C.push((new Array(E,F,this.combineStr(this[E]))).join(""))}else{C.push((new Array(E,F,encodeURIComponent(this[E].toString()))).join(""))}}}return C.join(D)};function i(C){x.call(this,"removeItem");this.item_id=C}i.prototype=new x();function z(D,C,E,F){x.call(this,D);this.user_id=C;this.item_id=E;this.session_id=F}z.prototype=new x();function o(C,D,E){z.call(this,"visitItem",C,D,E)}o.prototype=new z();function c(C,D,E){z.call(this,"reviewItem",C,D,E)}c.prototype=new z();function y(C,D,E){z.call(this,"addShopCart",C,D,E)}y.prototype=new z();function B(C,D,E){z.call(this,"addFavorite",C,D,E)}B.prototype=new z();function A(C,D,E){z.call(this,"addWishList",C,D,E)}A.prototype=new z();function w(C,D,E,F){z.call(this,"clickRecItem",C,D,E);this.req_id=F}w.prototype=new z();function e(C,D,E,F,G){z.call(this,"purchaseItem",C,D,E);this.price=F;this.quantity=G}e.prototype=new z();function h(D,C,E){x.call(this,"recommend");this.rec_type_code=D;this.session_id=C;if(typeof E!="number"){this.number=10}else{this.number=E}}h.prototype=new x();h.prototype.getQueryString=function(F,D){if(F===undefined||F===null){F="="}if(D===undefined||D===null){D="&"}var C=new Array();for(var E in this){if(typeof this[E]!="function"&&E!="request_name"){if((E==="item_id"||E==="must_show_item_id"||E==="dont_show_item_id")&&this[E].length>0){C.push((new Array(E,F,this.combineStr(this[E]))).join(""))}else{if(E==="category"&&this[E].length>0){C.push((new Array("filter",F,"Category In ('",this.combineStr(this[E],"',"),"')")).join(""))}else{if(E==="category_name"&&this[E].length>0){C.push((new Array("category",F,encodeURIComponent(this[E].toString()))).join(""))}else{C.push((new Array(E,F,encodeURIComponent(this[E].toString()))).join(""))}}}}}return C.join(D)};var d={FREQUENT_BOUGHT_TOGETHER:1,VIEWED_ULTIMATELY_BOUGHT:2,VIEWED_ALSO_VIEW:3,BASED_ON_PURCHASE_HISTORY:4,BASED_ON_SHOPPING_CART:5,BASED_ON_BROWSING_HISTORY:6,BOUGHT_ALSO_BOUGHT:7,PERSONAL_SALES_LIST:8};function g(E,C,D){h.call(this,d.PERSONAL_SALES_LIST,C,D);this.category_name=E;this.output_mod="onlyidsalesnum"}g.prototype=new h();function n(C,D,E){h.call(this,d.FREQUENT_BOUGHT_TOGETHER,D,E);this.item_id=C}n.prototype=new h();function p(C,D,E){h.call(this,d.VIEWED_ULTIMATELY_BOUGHT,D,E);this.item_id=C}p.prototype=new h();function s(C,D,E){h.call(this,d.BOUGHT_ALSO_BOUGHT,D,E);this.item_id=C}s.prototype=new h();function k(C,D,E){h.call(this,d.BASED_ON_BROWSING_HISTORY,D,E);this.item_id=C}k.prototype=new h();function m(C,D,E){h.call(this,d.BASED_ON_SHOPPING_CART,D,E);this.item_id=C}m.prototype=new h();function b(C,D,E){h.call(this,d.VIEWED_ALSO_VIEW,D,E);this.item_id=C}b.prototype=new h();function u(C,D,E){h.call(this,d.BASED_ON_PURCHASE_HISTORY,D,E);this.user_id=C}u.prototype=new h();function q(){x.call(this,"packedRequest")}q.prototype=new x();q.prototype.getQueryString=function(G,D){if(G===undefined||G===null){G="="}if(D===undefined||D===null){D="&"}var C=new Array();for(var E in this){if(typeof this[E]!="function"&&E!="request_name"){var F=this[E];C.push((new Array(E,G,"action->",F.getRequestName(),"/\\",F.getQueryString("->","/\\"))).join(""))}}return C.join(D)};function v(D,C){this.customer_id=D;if(C===undefined||C===null){this.server="http://www.baifendian.com/api/"}else{this.server=C}}v.prototype.getInvokeURL=function(C,D){return(new Array(this.server,C.getRequestName(),".do?customer_id=",this.customer_id,"&",C.getQueryString("=","&"),"&callback=",D)).join("")};v.prototype.invoke=function(C){var E;try{if(arguments.length>=2){if(typeof(l[arguments[1]])!="function"){alert("回调函数不存在！")}else{E=arguments[1]}}}catch(D){alert("回调函数不存在！")}if(!E){if(!l.bfd_null_function){l.bfd_null_function=function(F){}}E="bfd_null_function"}t(this.getInvokeURL(C,E))};function t(D){var C=document.createElement("script");C.setAttribute("src",D);document.getElementsByTagName("head")[0].appendChild(C)}function f(C){if(typeof C=="string"){this.itemId=C}else{if(Object.prototype.toString.apply(C)==="[object Array]"){if(C.length==2){this.itemId=C[0];this.salesnum=C[1]}else{this.itemId=C[0];this.itemName=C[1];this.itemLink=C[2];this.imageLink=C[3];this.itemPrice=C[4];this.weight=C[5]}}else{this.itemId=C.itemId;this.itemName=C.itemName;this.itemLink=C.itemLink;this.imageLink=C.imageLink;this.itemPrice=C.itemPrice;this.weight=C.weight}}}function a(C){if(Object.prototype.toString.apply(C)==="[object Array]"){this.code=C[0];if(this.code==0&&C.length>1){this.reqId=C[1];this.recs=new Array();for(var D=0;D<C[2].length;++D){this.recs.push(new f(C[2][D]))}}}else{this.code=parseInt(C.code);this.reqId=C.reqId;this.recs=C.recs}}var r=new Object;r.Client=v;r.AddItem=j;r.RemoveItem=i;r.VisitItem=o;r.ReviewItem=c;r.AddShopCart=y;r.AddFavorite=B;r.AddWishList=A;r.ClickRecItem=w;r.PurchaseItem=e;r.RecByFreqBoughtTogether=n;r.RecByViewUltiBought=p;r.RecByBoughtAlsoBought=s;r.RecByBrowsingHistory=k;r.RecByShoppingCart=m;r.RecByViewAlsoView=b;r.RecByUserHistory=u;r.RecByPersonalSalesList=g;r.PackedRequest=q;r.invokeBRS=t;r.RecItem=f;r.Response=a;l.brs=r})(window);