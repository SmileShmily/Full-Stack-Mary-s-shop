(function(e){function f(h,i,g){g=new brs.Response(g);this.template='<div class="bfd_box">		  <h1 class="bfd_title">模板标题</h1>		  <div class="bfd_contentbox">			<div class="bfd_pre_btn"></div>			<ul class="bfd_content">			  <li class="bfd_item">			  <span class="bfd_product_img"><a href="#" class="bfd_thumb_link" target="_blank" ><img class="bfd_thumb" src="images/zs_rightbtn.gif" width="100" height="100"/></a></span>			  <span class="bfd_price">商品价格</span>			  <span class="bfd_percent_box"><div class="bfd_buy_percent">5%</div>&nbsp;会买</span>			  <span class="bfd_name"><a href="#" class="bfd_item_name" target="_blank">商品标题</a></span>			  </li>			  <li class="bfd_item">			  	<!--商品展位-->			  </li>			  <li class="bfd_item">			  	<!--商品展位-->			  </li>			  <li class="bfd_item">			  	<!--商品展位-->			  </li>			  <li class="bfd_item">			  	<!--商品展位-->			  </li>			</ul>			<div class="bfd_next_btn" style=" float:right"></div>			<a href="http://www.baifendian.com/" target="_blank"  class="bfd_img_logo"></a>		  </div>		</div>		<div style="display:none" class="bfd_page">商品页码</div>		';this.self=document.getElementById(h);this.data=g;this.title=null;this.next_btn=null;this.pre_btn=null;this.content=null;this.bfd_item=null;this.page_label=null;this.title_text=i;this.page=0;this.page_max=0;this.page_num=0;this.record_max=0;this.title_className="bfd_title";this.page_label_className="bfd_page";this.content_className="bfd_content";this.pre_btn_className="bfd_pre_btn";this.next_btn_className="bfd_next_btn";this.item_className="bfd_item";this.thumb_link_className="bfd_thumb_link";this.thumb_className="bfd_thumb";this.price_className="bfd_price";this.item_name_className="bfd_item_name";this.buy_percent_className="bfd_buy_percent"}f.addListenerBFDEvent=function(h){if(e.attachEvent){if(document.getElementById("BFD_PAGE_CHANGE")==null){var g=document.createElement("DIV");g.style.display="none";g.id="BFD_PAGE_CHANGE";document.body.appendChild(g)}document.getElementById("BFD_PAGE_CHANGE").onclick=function(i){var j=e.bfdui.bfdcurrentTarget;h(j)}}else{document.addEventListener("BFD_PAGE_CHANGE",function(i){var j=i.bfdcurrentTarget;h(j)},false)}};f.prototype.showRecord=function(){if(this.content){this.content.innerHTML=""}if(this.page_label){this.page_label.innerHTML=(this.page+1)+"/"+this.page_max}for(var h=this.page*this.page_num;h<Math.min(this.record_max,((this.page+1)*this.page_num));h++){var m=this.data.recs[h];if(m.itemLink.indexOf("req_id=")==-1){if(m.itemLink.indexOf("?")<0){m.itemLink=m.itemLink+"?req_id="+this.data.reqId}else{m.itemLink=m.itemLink+"&req_id="+this.data.reqId}}if(!this.bfd_item){continue}var n=this.bfd_item.cloneNode(10);if(this.thumb_link_className){var l=d(n,this.thumb_link_className)[0];l.setAttribute("href",m.itemLink);l.setAttribute("href",m.itemLink);l.setAttribute("title",m.itemName)}if(this.thumb_className){var g=d(n,this.thumb_className)[0];g.setAttribute("src",m.imageLink);g.setAttribute("title",m.itemName);g.setAttribute("alt",m.itemName)}if(this.price_className){var k=d(n,this.price_className)[0];k.innerHTML="￥"+m.itemPrice}if(this.item_name_className){var o=d(n,this.item_name_className)[0];o.innerHTML=m.itemName;o.setAttribute("href",m.itemLink);o.setAttribute("title",m.itemName)}if(this.buy_percent_className){var j=d(n,this.buy_percent_className)[0];if(j){j.innerHTML=parseInt(parseFloat(m.weight)*100)+"%"}}this.content.appendChild(n)}b(this)};f.prototype.setTemplate=function(g){this.template=g};f.prototype.create=function(){var m=this;if(this.data.code!="0"){return}this.self.innerHTML=this.template;var l=d(this.self,this.title_className);this.title=l.length>0?l[0]:undefined;if(this.title){this.title.innerHTML=this.title_text}var k=d(this.self,this.pre_btn_className);this.pre_btn=k.length>0?k[0]:undefined;var i=d(this.self,this.next_btn_className);this.next_btn=i.length>0?i[0]:undefined;var h=d(this.self,this.content_className);this.content=h.length>0?h[0]:undefined;var j=d(this.self,this.item_className);this.bfd_item=j.length>0?j[0].cloneNode(10):undefined;var g=d(this.self,this.page_label_className);this.page_label=g.length>0?g[0]:undefined;this.page_num=this.page_num!=0?this.page_num:d(this.self,this.item_className).length;this.record_max=this.data.recs.length;this.page_max=Math.ceil(this.record_max/this.page_num);this.showRecord();if(this.pre_btn){c(this.pre_btn,"click",function(n){if(m.page>0){m.page--}m.showRecord()})}if(this.next_btn){c(this.next_btn,"click",function(n){if(m.page<m.page_max-1){m.page++}m.showRecord()})}};function b(i){if(!e.attachEvent){var h=document.createEvent("Events");h.initEvent("BFD_PAGE_CHANGE",true,true);h.bfdcurrentTarget=i;document.dispatchEvent(h)}else{if(document.getElementById("BFD_PAGE_CHANGE")==null){var g=document.createElement("DIV");g.style.display="none";g.id="BFD_PAGE_CHANGE";document.body.appendChild(g)}if(document.getElementById("BFD_PAGE_CHANGE")!=null){e.bfdui.bfdcurrentTarget=i;document.getElementById("BFD_PAGE_CHANGE").fireEvent("onclick")}}}function d(m,l){var g=new Array();for(var k=0;k<m.childNodes.length;k++){var j=m.childNodes.item(k);if(j.nodeType==1){if(j.className==l){g.push(j)}}if(j.hasChildNodes()){var h=d(j,l);if(h.length!=0){g=g.concat(h)}}}return g}function c(i,g,h){if(e.attachEvent){i.attachEvent("on"+g,h)}else{i.addEventListener(g,h,false)}}function a(h,g){if(e.attachEvent){h.detachEvent("on"+g,h["on"+g])}else{h.removeEventListener(g,h[g],false)}}bfdui=new Object();bfdui.BFDBanner=f;e.bfdui=bfdui})(window);